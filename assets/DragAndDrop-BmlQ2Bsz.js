import{d as h,a as c,b as k,f as l,o as r,g as t,I as y,J as _,F as p,l as v,t as g}from"./index-DnctvJdP.js";const w={class:"course-table"},I={class:"flex items-center gap-2"},x={class:"my-2"},D={class:"menu menu-horizontal bg-base-200 w-full gap-2"},C={draggable:"true","data-effect":"copy"},L={class:"card"},A={class:"table table-zebra"},M=["data-week","data-index"],z=h({__name:"DragAndDrop",setup(S){const d=c([{name:"语文",id:1},{name:"数学",id:2},{name:"编程",id:3},{name:"英语",id:4},{name:"物理",id:5},{name:"化学",id:6},{name:"生物",id:7},{name:"历史",id:8},{name:"地理",id:9},{name:"政治",id:10},{name:"体育",id:11},{name:"音乐",id:12},{name:"美术",id:13},{name:"信息技术",id:14},{name:"通用技术",id:15},{name:"心理健康",id:16},{name:"生命安全",id:17},{name:"劳动教育",id:18},{name:"其他",id:19}]),m=c([{week:1,courseIds:[0,2,3,2,3,1,2,3]},{week:2,courseIds:[1,2,3,2,3,1,2,3]},{week:3,courseIds:[1,2,3,2,3,1,2,3]},{week:4,courseIds:[1,2,3,2,3,1,2,3]},{week:5,courseIds:[1,2,3,2,3,1,2,3]},{week:6,courseIds:[0,0,0,0,0,0,0,0]},{week:7,courseIds:[0,0,0,0,0,0,0,0]}]),i=c({name:"",id:0}),u=c(""),b=()=>{d.value.push({name:u.value,id:d.value.length+1}),u.value=""};return k(()=>{const o=document.querySelector(".course-table");console.log(o,"container"),o.ondragstart=a=>{const e=a.target;if(a.dataTransfer&&e){const n=e.dataset.effect,s=["copy","move","link","copyMove","copyLink","linkMove","all","none","uninitialized"];a.dataTransfer.effectAllowed=n&&s.includes(n)?n:"move"}if(e){const n=d.value.find(s=>s.name===e.innerText);n?i.value=n:i.value={name:"",id:0}}},o.ondragover=a=>{a.preventDefault()},o.ondragenter=a=>{const e=a.target;document.querySelectorAll('[data-drop="true"]').forEach(n=>{n.classList.remove("bg-primary/30")}),e&&e.dataset.drop&&e.classList.add("bg-primary/30")},o.ondrop=a=>{const e=a.target;if(e){if(e.classList.remove("bg-primary/30"),!e.dataset.drop){console.log("不是可操作元素",e);return}if(i.value.id&&e.dataset.week&&e.dataset.index){const n=parseInt(e.dataset.week)-1,s=parseInt(e.dataset.index)-1,f=m.value[n];f&&f.courseIds[s]!==void 0&&(f.courseIds[s]=i.value.id)}}}}),(o,a)=>(r(),l("div",null,[a[2]||(a[2]=t("h1",{class:"font-title text-2xl md:text-3xl lg:text-4xl font-bold"},"拖拽API",-1)),a[3]||(a[3]=t("hr",{class:"my-4"},null,-1)),t("div",w,[t("div",I,[y(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),type:"text",class:"input input-bordered",placeholder:"添加课程"},null,512),[[_,u.value]]),t("button",{class:"btn btn-primary btn-sm",onClick:b},"添加")]),t("div",x,[t("ul",D,[(r(!0),l(p,null,v(d.value,e=>(r(),l("li",{key:e.id,class:"border rounded-md bg-secondary/10"},[t("a",C,g(e.name),1)]))),128))])]),t("div",L,[t("table",A,[a[1]||(a[1]=t("thead",null,[t("tr",null,[t("th"),t("th",null,"周一"),t("th",null,"周二"),t("th",null,"周三"),t("th",null,"周四"),t("th",null,"周五"),t("th",null,"周六"),t("th",null,"周日")])],-1)),t("tbody",null,[(r(),l(p,null,v(8,e=>t("tr",{key:e},[t("th",null,g(e),1),(r(),l(p,null,v(7,n=>t("td",{key:n,"data-drop":"true","data-week":n,"data-index":e},g(m.value[n-1]?.courseIds[e-1]?d.value.find(s=>s.id===m.value[n-1]?.courseIds[e-1])?.name:""),9,M)),64))])),64))])])])])]))}});export{z as default};
