import{d as w,a as d,b as _,q as b,A as x,f as s,o as r,n as v,L as g,g as n,t as f,_ as C}from"./index-DGwKKYZr.js";import{c as y}from"./bundle-full-C1wOsmt5.js";const T={key:0,class:"code-header"},H={class:"lang-badge"},j=["title"],F={key:0,class:"copy-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},B={key:1,class:"copy-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},E={class:"copy-text"},L={class:"code"},M=["innerHTML"],O={key:1,class:"loading-placeholder"},S=w({__name:"ShikiHighlight",props:{lang:{default:"javascript"},code:{default:`// 对象拷贝
function copyObject(orig) {
  var copy = Object.create(Object.getPrototypeOf(orig));
  copyOwnPropertiesFrom(copy, orig);
  return copy;
}`},theme:{default:"vitesse-dark"}},setup(u){const t=u,a=d(""),i=d(!1),h=d(t.theme),l=d(!1);let c=null;const p=async()=>{if(!t.code){a.value="";return}i.value=!0;try{const o=await y(t.code,{lang:t.lang,theme:t.theme});a.value=o,h.value=t.theme}catch(o){if(console.warn(`Failed to highlight code with theme "${t.theme}":`,o),t.theme!=="vitesse-dark"&&h.value!=="vitesse-dark")try{const e=await y(t.code,{lang:t.lang,theme:"vitesse-dark"});a.value=e,h.value="vitesse-dark",console.warn('Fallback to default theme "vitesse-dark"')}catch(e){console.error("Fallback theme also failed:",e),a.value=`<pre><code>${m(t.code)}</code></pre>`}else a.value=`<pre><code>${m(t.code)}</code></pre>`}finally{i.value=!1}};function m(o){if(typeof document>"u")return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");const e=document.createElement("div");return e.textContent=o,e.innerHTML}const k=async()=>{if(t.code)try{await navigator.clipboard.writeText(t.code),l.value=!0,c&&clearTimeout(c),c=setTimeout(()=>{l.value=!1},2e3)}catch(o){console.error("Failed to copy code:",o);try{const e=document.createElement("textarea");e.value=t.code,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),l.value=!0,c&&clearTimeout(c),c=setTimeout(()=>{l.value=!1},2e3)}catch(e){console.error("Fallback copy also failed:",e)}}};return _(()=>{p()}),b([()=>t.code,()=>t.lang,()=>t.theme],()=>{p()},{immediate:!1}),x(()=>{c&&clearTimeout(c)}),(o,e)=>(r(),s("div",{class:v(["code-container",[`language-${u.lang}`,{loading:i.value}]])},[a.value&&!i.value?(r(),s("div",T,[n("div",H,f(u.lang),1),n("button",{class:v(["copy-button",{copied:l.value}]),onClick:k,title:l.value?"已复制!":"复制代码"},[l.value?(r(),s("svg",B,[...e[1]||(e[1]=[n("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(r(),s("svg",F,[...e[0]||(e[0]=[n("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},null,-1),n("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},null,-1)])])),n("span",E,f(l.value?"已复制":"复制"),1)],10,j)])):g("",!0),n("div",L,[a.value?(r(),s("div",{key:0,innerHTML:a.value},null,8,M)):i.value?(r(),s("div",O," 加载中... ")):g("",!0)])],2))}}),q=C(S,[["__scopeId","data-v-6662195d"]]);export{q as S};
