import{V as L,W as k,X as G,q as H,Y as a,a as Y,p as T,h as q,D as B,B as I}from"./index-DGwKKYZr.js";const V=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const z=Object.prototype.toString,F=e=>z.call(e)==="[object Object]";function P(e){return Array.isArray(e)?e:[e]}function J(e,r={}){if(!L(e))return k(e);const i=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const n in e.value)i[n]=G(()=>({get(){return e.value[n]},set(o){var l;if(!((l=a(r.replaceRef))!==null&&l!==void 0)||l)if(Array.isArray(e.value)){const s=[...e.value];s[n]=o,e.value=s}else{const s={...e.value,[n]:o};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[n]=o}}));return i}function K(e,r,i){return H(e,r,{...i,immediate:!0})}const W=V?window:void 0;function N(e){var r;const i=a(e);return(r=i?.$el)!==null&&r!==void 0?r:i}function O(...e){const r=(n,o,l,s)=>(n.addEventListener(o,l,s),()=>n.removeEventListener(o,l,s)),i=T(()=>{const n=P(a(e[0])).filter(o=>o!=null);return n.every(o=>typeof o!="string")?n:void 0});return K(()=>{var n,o;return[(n=(o=i.value)===null||o===void 0?void 0:o.map(l=>N(l)))!==null&&n!==void 0?n:[W].filter(l=>l!=null),P(a(i.value?e[1]:e[0])),P(q(i.value?e[2]:e[1])),a(i.value?e[3]:e[2])]},([n,o,l,s],p,v)=>{if(!n?.length||!o?.length||!l?.length)return;const d=F(s)?{...s}:s,y=n.flatMap(h=>o.flatMap(g=>l.map(b=>r(h,g,b,d))));v(()=>{y.forEach(h=>h())})},{flush:"post"})}function R(e,r={}){var i;const{pointerTypes:n,preventDefault:o,stopPropagation:l,exact:s,onMove:p,onEnd:v,onStart:d,initialValue:y,axis:h="both",draggingElement:g=W,containerElement:b,handle:S=e,buttons:A=[0]}=r,f=Y((i=a(y))!==null&&i!==void 0?i:{x:0,y:0}),m=Y(),$=t=>n?n.includes(t.pointerType):!0,x=t=>{a(o)&&t.preventDefault(),a(l)&&t.stopPropagation()},C=t=>{var u;if(!a(A).includes(t.button)||a(r.disabled)||!$(t)||a(s)&&t.target!==a(e))return;const c=a(b),M=c==null||(u=c.getBoundingClientRect)===null||u===void 0?void 0:u.call(c),E=a(e).getBoundingClientRect(),X={x:t.clientX-(c?E.left-M.left+c.scrollLeft:E.left),y:t.clientY-(c?E.top-M.top+c.scrollTop:E.top)};d?.(X,t)!==!1&&(m.value=X,x(t))},D=t=>{if(a(r.disabled)||!$(t)||!m.value)return;const u=a(b),c=a(e).getBoundingClientRect();let{x:M,y:E}=f.value;(h==="x"||h==="both")&&(M=t.clientX-m.value.x,u&&(M=Math.min(Math.max(0,M),u.scrollWidth-c.width))),(h==="y"||h==="both")&&(E=t.clientY-m.value.y,u&&(E=Math.min(Math.max(0,E),u.scrollHeight-c.height))),f.value={x:M,y:E},p?.(f.value,t),x(t)},w=t=>{a(r.disabled)||!$(t)||m.value&&(m.value=void 0,v?.(f.value,t),x(t))};if(V){const t=()=>{var u;return{capture:(u=r.capture)!==null&&u!==void 0?u:!0,passive:!a(o)}};O(S,"pointerdown",C,t),O(g,"pointermove",D,t),O(g,"pointerup",w,t)}return{...J(f),position:f,isDragging:T(()=>!!m.value),style:T(()=>`left:${f.value.x}px;top:${f.value.y}px;`)}}function U(e,r={}){const{threshold:i=50,onSwipe:n,onSwipeEnd:o,onSwipeStart:l,passive:s=!0}=r,p=B({x:0,y:0}),v=B({x:0,y:0}),d=T(()=>p.x-v.x),y=T(()=>p.y-v.y),{max:h,abs:g}=Math,b=T(()=>h(g(d.value),g(y.value))>=i),S=I(!1),A=T(()=>b.value?g(d.value)>g(y.value)?d.value>0?"left":"right":y.value>0?"up":"down":"none"),f=t=>[t.touches[0].clientX,t.touches[0].clientY],m=(t,u)=>{p.x=t,p.y=u},$=(t,u)=>{v.x=t,v.y=u},x={passive:s,capture:!s},C=t=>{S.value&&o?.(t,A.value),S.value=!1},D=[O(e,"touchstart",t=>{if(t.touches.length!==1)return;const[u,c]=f(t);m(u,c),$(u,c),l?.(t)},x),O(e,"touchmove",t=>{if(t.touches.length!==1)return;const[u,c]=f(t);$(u,c),x.capture&&!x.passive&&Math.abs(d.value)>Math.abs(y.value)&&t.preventDefault(),!S.value&&b.value&&(S.value=!0),S.value&&n?.(t)},x),O(e,["touchend","touchcancel"],C,x)];return{isSwiping:S,direction:A,coordsStart:p,coordsEnd:v,lengthX:d,lengthY:y,stop:()=>D.forEach(t=>t())}}export{U as a,R as u};
